@{
    ViewBag.Title = "Mejor lo alquilo - VIEW Publicaciones";
    //Layout = null;
}

<script>
    function onConfirmDelete(link)
    {
        if (confirm('\u00bfEst\u00e1s seguro?')) {
            link.parentElement.parentElement.remove();
        }
    }
</script>

<!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TWFS7T"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function (w, d, s, l, i) {
    w[l] = w[l] || []; w[l].push({
        'gtm.start':
        new Date().getTime(), event: 'gtm.js'
    }); var f = d.getElementsByTagName(s)[0],
    j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
    '//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-TWFS7T');</script>
<!-- End Google Tag Manager -->

<!-- BEGIN BODY REAL -->
<div class="container" >        
       
    <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
            <div class="account-menu-holder">
                <div class="account-menu-title">
                    <p>MI CUENTA</p>
                </div>
                <div class="account-menu-option">
                    <div class="panel-group panel-group-faq" id="accordion" role="tablist" aria-multiselectable="true">
                        <div class="panel panel-faq">
                            <div class="panel-heading" role="tab" id="headingOne">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne" class="">
                                Configuracion
                                </a>
                            </h4>
                            </div>
                            <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <ul>
                                <li>@Html.ActionLink("Datos personales", "ViewUser", "Home")</li>
                                </ul>
    
                              
                            </div>
                            </div>
                        </div>
                        <div class="panel panel-faq">
                            <div class="panel-heading" role="tab" id="headingTwo">
                            <h4 class="panel-title">
                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                                Mis publicaciones
    
                                </a>
                            </h4>
                            </div>
                            <div id="collapseTwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingTwo" aria-expanded="true" >
                            <div class="panel-body">
                              
                                <ul>
	                                @{ string cantConsSinLeer = ViewBag.CantidadConsultas; }
                                    <li>@Html.ActionLink("Publicaciones", "ViewPublicaciones", "Home")</li>
                                    <li>@Html.ActionLink("Preguntas" + cantConsSinLeer, "ViewConsultasParaUsuario", "Home")</li>
                                    <li>@Html.ActionLink("Alquileres concretados", "ViewAlquileresPorUsuario", "Home")</li>
                                    <li>@Html.ActionLink("Reservas pendientes", "ViewSolicitudesParaUsuario", "Home")</li>
                                    <li>@Html.ActionLink("Reservas rechazadas", "ViewSolicitudesParaUsuarioRechazadas", "Home")</li>
                                </ul>
                            </div>
                            </div>
                        </div>
                        <div class="panel panel-faq">
                            <div class="panel-heading" role="tab" id="headingThree">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                Mis alquileres
                                </a>
                            </h4>
                            </div>
                            <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree" aria-expanded="false">
                            <div class="panel-body">
                                <ul>
	                                 @{ string cantRespSinLeer = ViewBag.CantidadRespuestasSinLeerString; }
                                    <li>@Html.ActionLink("Preguntas" + cantRespSinLeer, "ViewConsultasDelUsuario", "Home")</li>
                                    <li>@Html.ActionLink("Alquileres concretados", "ViewAlquileresDelUsuario", "Home")</li>
                                    <li>@Html.ActionLink("Reservas pendientes", "ViewSolicitudesDelUsuario", "Home")</li>
                                    <li>@Html.ActionLink("Reservas rechazadas", "ViewSolicitudesDelUsuarioRechazadas", "Home")</li>
                                </ul>
                              
                            </div>
                            </div>
                        </div>
                
                
              	    </div>
                </div>

            </div>
        </div>
        <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
            <div class="account-detail-holder">
                <div class="account-detail-title">
                    <p>Mis publicaciones - Publicaciones</p>
                </div>
                <div class="account-detail-content margin-top-bottom">
                
                    @if (ViewBag.Productos != null)
                    {
                        foreach (MvcApplication4.Models.Productos p1 in (List<MvcApplication4.Models.Productos>)ViewBag.Productos)
                        {
                        <div class="row">
                    	
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 margin-bottom">                        	
                                    Estado de la publicaci&oacute;n: @p1.EstadoProducto.DescripcionI1
                               </div>
                                <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12 margin-bottom">                        	
                                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" >
                                            

                                            @if (p1.FotosProductos.Count() > 0)
                                            {

                                                foreach (var f2 in p1.FotosProductos.ToList())
                                                {

                                                    if (String.IsNullOrEmpty(f2.Imagen.RutaFotoThumb))
                                                    {
                                                        <div class="product-image-thumb" style="background-image:url('@Url.Content(f2.Imagen.RutaFoto.Replace("../../", ""))')">
                                                           
                                                        </div>
                                                        
                                                    }
                                                    else
                                                    {
                                                        <div class="product-image-thumb" style="background-image:url('@Url.Content(f2.Imagen.RutaFotoThumb.Replace("../../", ""))')">
                                                            
                                                        </div>
                                                        
                                                
                                                    }
                                        
                                                 
                                                    break;

                                                }
                                            }
                                            else
                                            {
                                                 <div class="product-image-thumb" style="background-image:url('@Url.Content("~/assets/images/product-small-01.jpg")')">
                                                 </div>           
                                            }

                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" >
                                            <p>@Html.ActionLink(p1.Nombre, "Details/" + HttpUtility.UrlEncode(MvcApplication4.Controllers.Funciones.Encrypt(p1.IdProducto.ToString())), "Home")</p>
                                        <!--<p class="owner">Dueño: Mau Perrone</p>-->
                                        </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                
                                 

                        		        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 red-border padding-all-10 ">
                                            Hora 
                                            @if (p1.PrecioHora != null)
                                            {
                                                @p1.Moneda.Simbolo @Convert.ToInt32(p1.PrecioHora)
                                            }
                                            else
                                            {
                                                <span>-</span>
                                            }
                        		        </div>
                        		        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 red-border padding-all-10 ">
                                            Dia 
                                            @if (p1.PrecioDiario != null)
                                            {
                                                @p1.Moneda.Simbolo @Convert.ToInt32(@p1.PrecioDiario)
                                            }
                                            else
                                            {
                                                <span>-</span>
                                            }
                        		        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 red-border padding-all-10 ">
                                            Fin de semana
                                            @if (p1.PrecioFinDeSemana != null)
                                            {
                                                @p1.Moneda.Simbolo @Convert.ToInt32(@p1.PrecioFinDeSemana)
                                            }
                                            else
                                            {
                                                <span>-</span>
                                            }
                                        </div>    
                                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 red-border padding-all-10 ">
                                            Semana
                                            @if (p1.PrecioSemanal != null)
                                            {
                                                @p1.Moneda.Simbolo @Convert.ToInt32(@p1.PrecioSemanal)
                                            }
                                            else
                                            {
                                                <span>-</span>
                                            }
                                        </div>
                                        
                                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 red-border padding-all-10 ">
                                            Mes 
                                            @if (p1.PrecioMensual != null)
                                            {
                                                @p1.Moneda.Simbolo @Convert.ToInt32(@p1.PrecioMensual)
                                            }
                                            else
                                            {
                                                <span>-</span>
                                            }
                                        </div>
                               
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
                                    <!--<div class="col-lg-12">-->
                                        <!--<input type="button" class="le-button" value="Editar" />-->
                                        @Html.ActionLink("Editar", "EditProduct", new { id = HttpUtility.UrlEncode(MvcApplication4.Controllers.Funciones.Encrypt(p1.IdProducto.ToString())) }, new { @class = "le-button le-button-account  margin-top" })
                                    <!--</div>
                                    <div class="col-lg-12">-->
                                        <!--<input type="button" class="le-button" value="Eliminar" />-->
                                        @Ajax.ActionLink(
                                            "Eliminar",
                                            "DeleteProductConfirmedAjax",
                                            "Home",
                                            new
                                            {
                                                id = HttpUtility.UrlEncode(MvcApplication4.Controllers.Funciones.Encrypt(p1.IdProducto.ToString()))
                                            },
                                            new AjaxOptions
                                            {
                                                HttpMethod = "POST"
                                            }, new { onclick = "javascipt:onConfirmDelete(this);", @class = "le-button le-button-account margin-top" }
                                        ) 
                                    <!--</div>-->
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                                    <hr/>
                                </div>
                        </div>
                        
                        }
                    }
                    else
                    {
                        <div class="text-center">No tienes artículos publicados... 
                            @Html.ActionLink("Publicar", "CreateProduct", "Home", null, new { @class = "le-button" })
                        </div>
                    }
                </div>
                
            </div>
        </div>
    </div>
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
        <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color:#FF7E82;color:#FFFFFF">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="exampleModalLabel">Ingrese el motivo de rechazo</h4>
            </div>
            <div class="modal-body">
            <form>
            <!--
                <div class="form-group">
                <label for="recipient-name" class="control-label">Recipient:</label>
                <input type="text" class="form-control" id="recipient-name">
                </div>-->
                <div class="form-group">
                <label for="message-text" class="control-label">Motivo:</label>
                <textarea class="form-control" id="message-text"></textarea>
                </div>
            </form>
            </div>
            <div class="modal-footer">
            <button type="button" class="le-button" style="background-color:#FF7E82">Aceptar</button>
            <button type="button" class="le-button" data-dismiss="modal">Cancelar</button>
               
            </div>
        </div>
        </div>
    </div>
</div>

   
<!-- END BODY REAL -->